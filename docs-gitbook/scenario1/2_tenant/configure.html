
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Configuring a tenant Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../scenario2/scenario2.html" />
    
    
    <link rel="prev" href="../1_amq-admin/install.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Intro</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Scenario 1 - AMQP</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../scenario1.html">
            
                <a href="../scenario1.html">
            
                    
                    Statement Of Work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../0_ocp-admin/install.html">
            
                <a href="../0_ocp-admin/install.html">
            
                    
                    Installing via the Operator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../1_amq-admin/install.html">
            
                <a href="../1_amq-admin/install.html">
            
                    
                    Deploying the core infrastructure
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.4" data-path="configure.html">
            
                <a href="configure.html">
            
                    
                    Configuring a tenant
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Scenario 2 - IoT</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../scenario2/scenario2.html">
            
                <a href="../../scenario2/scenario2.html">
            
                    
                    Statement Of Work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../scenario2/0_ocp-admin/install.html">
            
                <a href="../../scenario2/0_ocp-admin/install.html">
            
                    
                    Installing via the Operator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../scenario2/1_amq-admin/install.html">
            
                <a href="../../scenario2/1_amq-admin/install.html">
            
                    
                    Deploying the core infrastructure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../../scenario2/2_tenant/configure.html">
            
                <a href="../../scenario2/2_tenant/configure.html">
            
                    
                    Configuring a tenant
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">The Cloud Native integration layer!</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../todo.adoc">
            
                <span>
            
                    
                    TODO
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Configuring a tenant</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="as-an-tenant-configuring-a-tenant">As an Tenant; Configuring a tenant</h1>
<div class="sect1">
<h2 id="_customer_brief">Customer Brief</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You work for Red Hat as a Middleware Consultant. The OCP cluster has AMQ Online deployed and an AddressSpacePlan and AddressPlans configured
and ready to be used. But these plans are only set out the quotas and how AMQ Online can be used, no messaging infrastructure has been deployed.
Your team wants to deploy the messaging bits and start using AMQ Online via AMQP. The following JIRA tickets have been raised.</p>
</div>
<div class="paragraph">
<p><strong>CONFIGURE ADDRESS SPACE TO USE STANDARDDEV; <a href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.3/html/using_amq_online_on_openshift_container_platform/managing-address-spaces-messaging#address-space-examples-messaging" target="_blank">docs</a></strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>AS A messaging application tenant
I WANT TO configure the address space to use the &apos;standarddev&apos; AddressSpacePlan
SO THAT i have a address space in my application project</pre>
</div>
</div>
<div class="paragraph">
<p><strong>CONFIGURE TWO ADDRESSES WHICH HAS STORE AND FORWARD SEMANTICS USING A CONFIGURED PLAN; <a href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.3/html/using_amq_online_on_openshift_container_platform/managing-addresses-messaging#create-address-cli-messaging" target="_blank">docs</a></strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>AS A messaging application tenant
I WANT TO configure two addresses to use store and forward
SO THAT i have an address to publish/consume messages to/from</pre>
</div>
</div>
<div class="paragraph">
<p><strong>CONFIGURE A USER WITH READ/WRITE ACCESS TO THE ADDRESSES; <a href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.3/html/using_amq_online_on_openshift_container_platform/con-user-model-messaging#authentication" target="_blank">docs</a></strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>AS A messaging application tenant
I WANT TO configure a MessagingUser
SO THAT i can produce/consume to my addresses</pre>
</div>
</div>
<div class="paragraph">
<p><strong>CONNECT TEST CLIENT TO ADDRESS SPACE; <a href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.3/html/using_amq_online_on_openshift_container_platform/assembly-connecting-applications-messaging" target="_blank">docs</a></strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>AS A messaging application tenant
I WANT TO produce and consume a 100 messages to the address space
SO THAT i know the AddressSpace works correctly</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Dont know the route or service name for your address space? Look at the status of your address space:
     oc get addressspace smarttruck -o yaml
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Dont have a AMQP client? Why not try <a href="https://developers.redhat.com/blog/2019/04/24/using-quiver-with-amq-on-red-hat-openshift-container-platform/" target="_blank">using Quiver?</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_do_i_do_that">How do I do that?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A starting point for <a href="templates">YAML templates</a> has been provided but some have missing properties.
Follow the docs provided and update the YAML. Once you have applied the YAML to the cluster, you should see something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc apply <span class="hljs-_">-f</span> lab/scenario1/2_tenant/templates -n <span class="hljs-variable">$APP_NS</span>
addressspace.enmasse.io/smarttruck created
address.enmasse.io/smarttruck.drivernotifications created
address.enmasse.io/smarttruck.trucknotifications created
messaginguser.user.enmasse.io/smarttruck.truck1 created

$ oc get pods -n <span class="hljs-variable">$OPERATOR_NS</span>
NAME                                        READY   STATUS    RESTARTS   AGE
enmasse-operator-85f495<span class="hljs-built_in">fc</span>7c-fzq8t           1/1     Running   0          64m
address-space-controller-779b646cb9-cqs5p   1/1     Running   0          64m
api-server-9<span class="hljs-built_in">fc</span>7bf698-4btgd                  1/1     Running   0          64m
user-api-server-556d984467-27xsd            1/1     Running   0          64m
standard-authservice-77859d9ccb-2grlg       1/1     Running   0          27m
admin.bgfj9fsa0q<span class="hljs-_">-d</span>867b4bb-clkvg             2/2     Running   0          3m
qdrouterd-bgfj9fsa0q-0                      1/1     Running   0          3m
broker-bgfj9fsa0q-qce8-0                    1/1     Running   0          3m
broker-bgfj9fsa0q-feen-0                    1/1     Running   0          3m
broker-bgfj9fsa0q-zo09-0                    1/1     Running   0          3m
console-5657c8797-drvtp                     2/2     Running   0          3m
qdrouterd-bgfj9fsa0q-1                      1/1     Running   0          3m
qdrouterd-bgfj9fsa0q-2                      1/1     Running   0          3m

$ oc get svc -n <span class="hljs-variable">$OPERATOR_NS</span>
NAME                             TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                   AGE
service/broker-bgfj9fsa0q-feen           ClusterIP   None             &lt;none&gt;        8080/TCP                                                  80s
service/broker-bgfj9fsa0q-qce8           ClusterIP   None             &lt;none&gt;        8080/TCP                                                  80s
service/broker-bgfj9fsa0q-zo09           ClusterIP   None             &lt;none&gt;        8080/TCP                                                  80s
service/console                          ClusterIP   172.30.232.192   &lt;none&gt;        8443/TCP                                                  54m
service/console-bgfj9fsa0q               ClusterIP   172.30.73.204    &lt;none&gt;        8081/TCP                                                  2m4s
service/messaging-bgfj9fsa0q             ClusterIP   172.30.185.240   &lt;none&gt;        5672/TCP,5671/TCP,55671/TCP,56671/TCP,55672/TCP,443/TCP   2m4s
service/qdrouterd-headless-bgfj9fsa0q    ClusterIP   None             &lt;none&gt;        55672/TCP,8080/TCP                                        2m4s
service/queue-scheduler-bgfj9fsa0q       ClusterIP   172.30.43.217    &lt;none&gt;        5672/TCP                                                  2m4s
service/ragent-bgfj9fsa0q                ClusterIP   172.30.135.155   &lt;none&gt;        5671/TCP                                                  2m4s
service/standard-authservice             ClusterIP   172.30.147.210   &lt;none&gt;        8443/TCP,5671/TCP                                         18m
service/standard-controller-bgfj9fsa0q   ClusterIP   172.30.207.76    &lt;none&gt;        8080/TCP                                                  2m4s
service/v1beta1-enmasse-io               ClusterIP   172.30.195.249   &lt;none&gt;        443/TCP                                                   55m
service/v1beta1-user-enmasse-io          ClusterIP   172.30.34.204    &lt;none&gt;        443/TCP                                                   55m                                                16m

$ oc get route -n <span class="hljs-variable">$OPERATOR_NS</span>
NAME                                                HOST/PORT                                                                                             PATH   SERVICES               PORT    TERMINATION   WILDCARD
route.route.openshift.io/console                    console-openshift-operators.apps.cluster-none-4fd7.none-4fd7.openshiftworkshop.com                           console                https   reencrypt     None
route.route.openshift.io/console-bgfj9fsa0q         console-bgfj9fsa0q-openshift-operators.apps.cluster-none-4fd7.none-4fd7.openshiftworkshop.com                console-bgfj9fsa0q     https   reencrypt     None
route.route.openshift.io/messaging-bgfj9fsa0q       messaging-bgfj9fsa0q-openshift-operators.apps.cluster-none-4fd7.none-4fd7.openshiftworkshop.com              messaging-bgfj9fsa0q   amqps   passthrough   None
route.route.openshift.io/messaging-wss-bgfj9fsa0q   messaging-wss-bgfj9fsa0q-openshift-operators.apps.cluster-none-4fd7.none-4fd7.openshiftworkshop.com          messaging-bgfj9fsa0q   https   reencrypt     None
route.route.openshift.io/standard-authservice       standard-authservice-openshift-operators.apps.cluster-none-4fd7.none-4fd7.openshiftworkshop.com              standard-authservice   https   reencrypt     None</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_next">Whats next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#x2019;ve now completed the scenario; lets move onto <a href="../../scenario2/scenario2.html">scenario 2</a>.</p>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../1_amq-admin/install.html" class="navigation navigation-prev " aria-label="Previous page: Deploying the core infrastructure">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../../scenario2/scenario2.html" class="navigation navigation-next " aria-label="Next page: Statement Of Work">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Configuring a tenant","level":"2.4","depth":1,"next":{"title":"Statement Of Work","level":"3.1","depth":1,"path":"scenario2/scenario2.adoc","ref":"scenario2/scenario2.adoc","articles":[]},"previous":{"title":"Deploying the core infrastructure","level":"2.3","depth":1,"path":"scenario1/1_amq-admin/install.adoc","ref":"scenario1/1_amq-admin/install.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"scenario1/2_tenant/configure.adoc","mtime":"2019-06-19T13:55:08.883Z","type":"asciidoc","time":""},"gitbook":{"path":"scenario1/2_tenant/configure.adoc","mtime":"2019-06-19T13:55:08.883Z","type":"asciidoc","time":""},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

